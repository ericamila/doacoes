{% extends 'base.html' %}

{% block content %}
  {% include 'messages.html' %}

  <div class="card">
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
      <h5 class="mb-0">Editar Usuário</h5>
      <a href="{% url 'users:lists' %}" class="btn btn-sm btn-light">Voltar</a>
    </div>
    <div class="card-body">
      <form method="post" class="needs-validation" novalidate>
        {% csrf_token %}
        
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="{{ form.first_name.id_for_label }}" class="form-label">
              {{ form.first_name.label }}{% if form.first_name.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>
            {{ form.first_name }}
            {% if form.first_name.errors %}
              <div class="invalid-feedback d-block">
                {% for error in form.first_name.errors %}
                  {{ error }}
                {% endfor %}
              </div>
            {% endif %}
          </div>
          
          <div class="col-md-6 mb-3">
            <label for="{{ form.email.id_for_label }}" class="form-label">
              {{ form.email.label }}{% if form.email.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>
            {{ form.email }}
            {% if form.email.errors %}
              <div class="invalid-feedback d-block">
                {% for error in form.email.errors %}
                  {{ error }}
                {% endfor %}
              </div>
            {% endif %}
          </div>
        </div>
        
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="{{ form.cpf.id_for_label }}" class="form-label">
              {{ form.cpf.label }}{% if form.cpf.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>
            {{ form.cpf }}
            {% if form.cpf.errors %}
              <div class="invalid-feedback d-block">
                {% for error in form.cpf.errors %}
                  {{ error }}
                {% endfor %}
              </div>
            {% endif %}
          </div>
          
          <div class="col-md-6 mb-3">
            <label for="{{ form.telefone.id_for_label }}" class="form-label">
              {{ form.telefone.label }}{% if form.telefone.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>
            {{ form.telefone }}
            {% if form.telefone.errors %}
              <div class="invalid-feedback d-block">
                {% for error in form.telefone.errors %}
                  {{ error }}
                {% endfor %}
              </div>
            {% endif %}
          </div>
        </div>
        
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="{{ form.tipo_usuario.id_for_label }}" class="form-label">
              Tipo de Usuário{% if form.tipo_usuario.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>
            <select name="tipo_usuario" id="{{ form.tipo_usuario.id_for_label }}" class="form-select">
              <option value="0" {% if user.tipo_usuario == 0 %}selected{% endif %}>Administrador</option>
              <option value="1" {% if user.tipo_usuario == 1 %}selected{% endif %}>Representante de Município</option>
            </select>
            {% if form.tipo_usuario.errors %}
              <div class="invalid-feedback d-block">
                {% for error in form.tipo_usuario.errors %}
                  {{ error }}
                {% endfor %}
              </div>
            {% endif %}
          </div>
          
          <div class="col-md-6 mb-3">
            <label for="{{ form.situacao.id_for_label }}" class="form-label">
              Situação{% if form.situacao.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>
            <select name="situacao" id="{{ form.situacao.id_for_label }}" class="form-select">
              <option value="0" {% if user.situacao == 0 %}selected{% endif %}>Ativo</option>
              <option value="1" {% if user.situacao == 1 %}selected{% endif %}>Inativo</option>
              <option value="2" {% if user.situacao == 2 %}selected{% endif %}>Pendente</option>
            </select>
            {% if form.situacao.errors %}
              <div class="invalid-feedback d-block">
                {% for error in form.situacao.errors %}
                  {{ error }}
                {% endfor %}
              </div>
            {% endif %}
          </div>
        </div>
        
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="{{ form.codigo_sei.id_for_label }}" class="form-label">
              {{ form.codigo_sei.label }}{% if form.codigo_sei.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>
            {{ form.codigo_sei }}
            {% if form.codigo_sei.errors %}
              <div class="invalid-feedback d-block">
                {% for error in form.codigo_sei.errors %}
                  {{ error }}
                {% endfor %}
              </div>
            {% endif %}
          </div>
          
          <div class="col-md-6 mb-3">
            <label for="{{ form.municipios.id_for_label }}" class="form-label">
              {{ form.municipios.label }}{% if form.municipios.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>
            {{ form.municipios }}
            {% if form.municipios.errors %}
              <div class="invalid-feedback d-block">
                {% for error in form.municipios.errors %}
                  {{ error }}
                {% endfor %}
              </div>
            {% endif %}
          </div>
        </div>
        
        <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
          <a href="{% url 'users:lists' %}" class="btn btn-outline-secondary">Cancelar</a>
          <button type="submit" class="btn btn-primary">Salvar Alterações</button>
        </div>
      </form>
    </div>
  </div>
{% endblock %}
